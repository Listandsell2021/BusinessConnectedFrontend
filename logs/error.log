{"level":"error","message":"Background geocoding failed for partner 68c2b0ce7d34bb9ce1868f6c - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:21:50.786Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b0ce7d34bb9ce1868f6c - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:21:50.787Z"}
{"address":"127.0.0.1","code":"ESOCKET","command":"CONN","errno":-111,"level":"error","message":"Email send failed: connect ECONNREFUSED 127.0.0.1:587","port":587,"stack":"Error: connect ECONNREFUSED 127.0.0.1:587\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)","syscall":"connect","timestamp":"2025-09-11T11:21:50.825Z"}
{"emailError":"connect ECONNREFUSED 127.0.0.1:587","level":"error","message":"Failed to send registration confirmation email to muskansetia08@gmail.com","partnerId":"68c2b0ce7d34bb9ce1868f6c","timestamp":"2025-09-11T11:21:50.825Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:21:50.835Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b1467d34bb9ce1868f76 - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:23:50.114Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b1467d34bb9ce1868f76 - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:23:50.115Z"}
{"address":"127.0.0.1","code":"ESOCKET","command":"CONN","errno":-111,"level":"error","message":"Email send failed: connect ECONNREFUSED 127.0.0.1:587","port":587,"stack":"Error: connect ECONNREFUSED 127.0.0.1:587\n    at TCPConnectWrap.afterConnect [as oncomplete] (node:net:1611:16)","syscall":"connect","timestamp":"2025-09-11T11:23:50.117Z"}
{"emailError":"connect ECONNREFUSED 127.0.0.1:587","level":"error","message":"Failed to send registration confirmation email to muskansetia08@gmail.com","partnerId":"68c2b1467d34bb9ce1868f76","timestamp":"2025-09-11T11:23:50.118Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:23:50.122Z"}
{"code":"EAUTH","command":"AUTH PLAIN","error":"Invalid login: 535 Authentication failed","level":"error","message":"Email send failed:","subject":"Test Email - Leadform Configuration","timestamp":"2025-09-11T11:35:02.867Z","to":"jadon.oconnell55@ethereal.email"}
{"level":"error","message":"Background geocoding failed for partner 68c2b42d96453e8b115a8aae - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:14.046Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b42d96453e8b115a8aae - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:14.046Z"}
{"code":"EAUTH","command":"AUTH PLAIN","error":"Invalid login: 535 Authentication failed","level":"error","message":"Email send failed:","subject":"Registration Received - Welcome to Leadform!","timestamp":"2025-09-11T11:36:17.954Z","to":"test.partner@example.com"}
{"emailError":"Invalid login: 535 Authentication failed","level":"error","message":"Failed to send registration confirmation email to test.partner@example.com","partnerId":"68c2b42d96453e8b115a8aae","timestamp":"2025-09-11T11:36:17.954Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:36:17.963Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b43196453e8b115a8ab8 - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:18.069Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b43196453e8b115a8ab8 - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:18.070Z"}
{"code":"EAUTH","command":"AUTH PLAIN","error":"Invalid login: 535 Authentication failed","level":"error","message":"Email send failed:","subject":"Registration Received - Welcome to Leadform!","timestamp":"2025-09-11T11:36:20.217Z","to":"test.1757590577983@example.com"}
{"emailError":"Invalid login: 535 Authentication failed","level":"error","message":"Failed to send registration confirmation email to test.1757590577983@example.com","partnerId":"68c2b43196453e8b115a8ab8","timestamp":"2025-09-11T11:36:20.219Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:36:20.235Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b43496453e8b115a8abf - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:20.340Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b43496453e8b115a8abf - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:20.340Z"}
{"code":"EAUTH","command":"AUTH PLAIN","error":"Invalid login: 535 Authentication failed","level":"error","message":"Email send failed:","subject":"Registration Received - Welcome to Leadform!","timestamp":"2025-09-11T11:36:22.571Z","to":"services.test.1757590580227@example.com"}
{"emailError":"Invalid login: 535 Authentication failed","level":"error","message":"Failed to send registration confirmation email to services.test.1757590580227@example.com","partnerId":"68c2b43496453e8b115a8abf","timestamp":"2025-09-11T11:36:22.572Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:36:22.585Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b43696453e8b115a8ac6 - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:22.691Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b43696453e8b115a8ac6 - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:22.691Z"}
{"code":"EAUTH","command":"AUTH PLAIN","error":"Invalid login: 535 Authentication failed","level":"error","message":"Email send failed:","subject":"Registration Received - Welcome to Leadform!","timestamp":"2025-09-11T11:36:26.447Z","to":"logging.test.1757590582584@example.com"}
{"emailError":"Invalid login: 535 Authentication failed","level":"error","message":"Failed to send registration confirmation email to logging.test.1757590582584@example.com","partnerId":"68c2b43696453e8b115a8ac6","timestamp":"2025-09-11T11:36:26.448Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:36:26.453Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b449b076748af3b485d8 - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:36:41.880Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:36:45.629Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b488b076748af3b485de - moving: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:37:44.255Z"}
{"level":"error","message":"Background geocoding failed for partner 68c2b488b076748af3b485de - cleaning: Cannot find module '../services/geocodingService'\nRequire stack:\n- /home/lenovo/Documents/Leadform/server/controllers/authController.js\n- /home/lenovo/Documents/Leadform/server/routes/auth.js\n- /home/lenovo/Documents/Leadform/server/routes/index.js\n- /home/lenovo/Documents/Leadform/server/index.js","timestamp":"2025-09-11T11:37:44.255Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_registration` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_registration` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_registration"},"value":"partner_registration"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_registration` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at processTicksAndRejections (node:internal/process/task_queues:77:11)\n    at runNextTicks (node:internal/process/task_queues:64:3)\n    at process.processImmediate (node:internal/timers:454:9)","timestamp":"2025-09-11T11:37:47.962Z"}
{"ip":"::ffff:127.0.0.1","level":"error","message":"Bad escaped character in JSON at position 80","method":"POST","stack":"SyntaxError: Bad escaped character in JSON at position 80\n    at JSON.parse (<anonymous>)\n    at parse (/home/lenovo/Documents/Leadform/server/node_modules/body-parser/lib/types/json.js:92:19)\n    at /home/lenovo/Documents/Leadform/server/node_modules/body-parser/lib/read.js:128:18\n    at AsyncResource.runInAsyncScope (node:async_hooks:206:9)\n    at invokeCallback (/home/lenovo/Documents/Leadform/server/node_modules/raw-body/index.js:238:16)\n    at done (/home/lenovo/Documents/Leadform/server/node_modules/raw-body/index.js:227:7)\n    at IncomingMessage.onEnd (/home/lenovo/Documents/Leadform/server/node_modules/raw-body/index.js:287:7)\n    at IncomingMessage.emit (node:events:524:28)\n    at endReadableNT (node:internal/streams/readable:1698:12)\n    at process.processTicksAndRejections (node:internal/process/task_queues:82:21)","timestamp":"2025-09-11T11:54:21.727Z","url":"/api/auth/reset-password","userAgent":"curl/7.81.0"}
{"level":"error","message":"Failed to create password change notification for partner 68c2b92c423e2a4fd4cf5a06: Partner not found","stack":"Error: Partner not found\n    at NotificationService.createPasswordChangedNotification (/home/lenovo/Documents/Leadform/server/services/notificationService.js:248:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async resetPassword (/home/lenovo/Documents/Leadform/server/controllers/authController.js:613:9)","timestamp":"2025-09-11T11:58:17.916Z"}
{"level":"error","message":"Failed to create welcome notification: Partner not found","stack":"Error: Partner not found\n    at NotificationService.createPartnerWelcomeNotification (/home/lenovo/Documents/Leadform/server/services/notificationService.js:10:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updatePartnerStatus (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:300:11)","timestamp":"2025-09-11T12:18:49.637Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_status_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":22,"message":"`partner_status_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_status_updated"},"value":"partner_status_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_status_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_status_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T12:18:49.647Z"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T12:30:04.256Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T12:30:04.281Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T12:31:46.703Z"}
{"level":"error","message":"Failed to send approval email or create notification: EmailService is not a constructor","stack":"TypeError: EmailService is not a constructor\n    at updatePartnerServiceStatus (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:246:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-09-11T12:36:17.906Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_service_status_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":30,"message":"`partner_service_status_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_service_status_updated"},"value":"partner_service_status_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_service_status_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_service_status_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T12:36:17.916Z"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T12:55:04.482Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T12:55:04.515Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"expiredAt":"2025-09-11T13:08:29.000Z","level":"error","message":"Auth middleware error: jwt expired","name":"TokenExpiredError","stack":"TokenExpiredError: jwt expired\n    at /home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:190:21\n    at getSecret (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:97:14)\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:101:10)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)","timestamp":"2025-09-11T13:08:54.863Z"}
{"level":"error","message":"Failed to send type change email: EmailService is not a constructor","stack":"TypeError: EmailService is not a constructor\n    at updatePartnerType (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:468:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-09-11T13:10:38.825Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_type_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_service_approved","partner_service_rejected","partner_service_status_updated","partner_suspended","partner_reactivated","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_type_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_type_updated"},"value":"partner_type_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_type_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_type_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T13:10:38.846Z"}
{"level":"error","message":"Failed to send type change email: EmailService is not a constructor","stack":"TypeError: EmailService is not a constructor\n    at updatePartnerType (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:468:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-09-11T13:11:27.960Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_type_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_service_approved","partner_service_rejected","partner_service_status_updated","partner_suspended","partner_reactivated","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_type_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_type_updated"},"value":"partner_type_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_type_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_type_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T13:11:27.972Z"}
{"level":"error","message":"Failed to create suspension notifications: EmailService is not a constructor","stack":"TypeError: EmailService is not a constructor\n    at updatePartnerStatus (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:392:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-09-11T13:25:42.250Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_status_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_service_approved","partner_service_rejected","partner_service_status_updated","partner_suspended","partner_reactivated","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":22,"message":"`partner_status_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_status_updated"},"value":"partner_status_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_status_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_status_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T13:25:42.273Z"}
{"level":"error","message":"Failed to create reactivation notifications: Partner not found","stack":"Error: Partner not found\n    at NotificationService.createPartnerWelcomeNotification (/home/lenovo/Documents/Leadform/server/services/notificationService.js:10:27)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n    at async updatePartnerStatus (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:373:11)","timestamp":"2025-09-11T17:13:30.519Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_status_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_service_approved","partner_service_rejected","partner_service_status_updated","partner_suspended","partner_reactivated","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":22,"message":"`partner_status_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_status_updated"},"value":"partner_status_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_status_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_status_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T17:13:30.530Z"}
{"level":"error","message":"Failed to send rejection email or create notification: EmailService is not a constructor","stack":"TypeError: EmailService is not a constructor\n    at updatePartnerServiceStatus (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:278:30)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-09-11T17:15:30.604Z"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:23:01.744Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:23:01.755Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"PUT","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:23:26.069Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:33:04.265Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:33:04.269Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:33:12.812Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::1","level":"error","message":"Not Found - /api/api/settings","method":"GET","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:33:12.819Z","url":"/api/api/settings","userAgent":"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/136.0.0.0 Safari/537.36"}
{"ip":"::ffff:127.0.0.1","level":"error","message":"Not Found - /api/api/settings","method":"HEAD","stack":"Error: Not Found - /api/api/settings\n    at notFound (/home/lenovo/Documents/Leadform/server/middleware/notFound.js:3:17)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at trim_prefix (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:328:13)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:286:9\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:646:15\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:265:14)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)\n    at router (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:47:12)","timestamp":"2025-09-11T17:38:42.222Z","url":"/api/api/settings","userAgent":"curl/7.81.0"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:42:11.369Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:42:11.373Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:42:33.104Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:42:33.108Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:45:47.701Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:45:47.706Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:45:58.668Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:45:58.680Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:47:05.458Z"}
{"level":"error","message":"Auth middleware error: jwt malformed","name":"JsonWebTokenError","stack":"JsonWebTokenError: jwt malformed\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:70:17)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:280:10)\n    at Function.handle (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:175:3)","timestamp":"2025-09-11T17:47:05.466Z"}
{"expiredAt":"2025-09-11T18:07:21.000Z","level":"error","message":"Auth middleware error: jwt expired","name":"TokenExpiredError","stack":"TokenExpiredError: jwt expired\n    at /home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:190:21\n    at getSecret (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:97:14)\n    at module.exports [as verify] (/home/lenovo/Documents/Leadform/server/node_modules/jsonwebtoken/verify.js:101:10)\n    at authenticateToken (/home/lenovo/Documents/Leadform/server/middleware/auth.js:17:25)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at next (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:149:13)\n    at Route.dispatch (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/route.js:119:3)\n    at Layer.handle [as handle_request] (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/layer.js:95:5)\n    at /home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:284:15\n    at Function.process_params (/home/lenovo/Documents/Leadform/server/node_modules/express/lib/router/index.js:346:12)","timestamp":"2025-09-11T18:07:33.070Z"}
{"level":"error","message":"Failed to send type change email: EmailService is not a constructor","stack":"TypeError: EmailService is not a constructor\n    at updatePartnerType (/home/lenovo/Documents/Leadform/server/controllers/partnerController.js:491:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:95:5)","timestamp":"2025-09-11T21:16:55.725Z"}
{"_message":"Log validation failed","errors":{"action":{"kind":"enum","message":"`partner_type_updated` is not a valid enum value for path `action`.","name":"ValidatorError","path":"action","properties":{"enumValues":["lead_created","lead_creation_failed","cancellation_requested","user_registration","user_profile_updated","user_password_changed","partner_registration","lead_accepted","lead_cancelled","lead_rejected","settings_updated","partner_profile_updated","partner_dashboard_accessed","partner_invoice_downloaded","partner_lead_viewed","partner_lead_contacted","lead_assigned","lead_reassigned","partner_approved","partner_rejected","partner_service_approved","partner_service_rejected","partner_service_status_updated","partner_suspended","partner_reactivated","partner_type_changed","partner_created","partner_updated","partner_deleted","invoice_generated","invoice_sent","data_exported","system_backup_created","user_created","user_updated","user_deleted","user_role_changed","service_config_updated","system_settings_updated","login_success","login_failed","user_login","logout","password_reset","password_reset_request","account_locked","account_unlocked","session_expired","token_refreshed","email_sent","email_failed","email_bounced","sms_sent","sms_failed","scheduled_job","error_logged","webhook_received","webhook_failed","api_key_created","api_key_revoked","rate_limit_exceeded","security_alert","suspicious_activity_detected","bulk_import","bulk_export","data_migration","database_cleanup","file_upload","file_download","file_deleted"],"length":20,"message":"`partner_type_updated` is not a valid enum value for path `action`.","path":"action","type":"enum","value":"partner_type_updated"},"value":"partner_type_updated"}},"level":"error","message":"Failed to create audit log: Log validation failed: action: `partner_type_updated` is not a valid enum value for path `action`.","stack":"ValidationError: Log validation failed: action: `partner_type_updated` is not a valid enum value for path `action`.\n    at Document.invalidate (/home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3358:32)\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/document.js:3119:17\n    at /home/lenovo/Documents/Leadform/server/node_modules/mongoose/lib/schemaType.js:1416:9\n    at process.processTicksAndRejections (node:internal/process/task_queues:77:11)","timestamp":"2025-09-11T21:16:55.741Z"}
